<?xml version="1.0" encoding="UTF-8"?>
<sequence name="CustBillingAccDetails" trace="disable" xmlns="http://ws.apache.org/ns/synapse">
    <header expression="fn:concat('Bearer ',get-property('authToken'))" name="Authorization" scope="transport"/>
    <call>
        <endpoint key="CustBillingAccDetailsEP"/>
    </call>
    <property description="custBillingAccsCount" expression="count(//billingAccountID)" name="custBillingAccsCount" scope="default" type="STRING"/>
    <log description="custBillingAccsCount" level="custom">
        <property expression="get-property('custBillingAccsCount')" name="custBillingAccsCount"/>
    </log>
    <property description="billingAccDetails" expression="json-eval($)" name="billingAccDetails" scope="default" type="STRING"/>
</sequence>
